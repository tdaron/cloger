#include <stdint.h>
#include <string.h>
#ifdef MAX7219
#include <fcntl.h>
#include <linux/spi/spidev.h>
#include <screen.h>
#include <stdio.h>
#include <sys/ioctl.h>
#include <unistd.h>

#define MODULE_COUNT 4
#define MIN(a, b) ((a) < (b) ? (a) : (b))

// Private API (head)
uint8_t screen_offset;
uint8_t screen_row = 0; // Describes which COLUMN we are in
int fd;
uint8_t font[128][8];
uint8_t small_font[256][6];
/*
Screen memory organisation: ()
__0__ __4__
__1__ __5__
__2__ __6__
__3__ __7__
*/
uint8_t screen[MODULE_COUNT * 8] = {0}; // ROW PER ROW, MODULE PER MODULE
void clear_screen();
void draw_screen();
void max7219_init();
void draw_screen_graph(uint8_t *graph, uint8_t width, uint8_t height);

// Public API
void screen_init() {
#ifdef MAX7219_DUMMY
  fd = open("/tmp/fake_spi", O_RDWR);
#else
  fd = open("/dev/spidev0.0", O_RDWR);
#endif
  if (fd < 0) {
    perror("[MAX7219] Unable to open spi\n");
    exit(EXIT_FAILURE);
  }
  max7219_init();
}

void screen_draw_text(String_View text) {
  clear_screen();
  for (int i = 0; i < (int)text.count; i++) {
    // for (int j = 0; j < 8; j++) {
    //   screen[i * 8 + j] = font[(size_t)text.data[i]][j];
    // }
    draw_screen_graph(small_font[(size_t)text.data[i]], 4, 6);
    
  }
  draw_screen();
}

void screen_tell_text(String_View text) {
  // TODO: Make text start at the right
  uint8_t offset = 0;
  uint8_t c_offset = 0;
  while (c_offset < text.count) {
    clear_screen();
    for (int i = 0; i < MODULE_COUNT; i++) {
      for (int j = 0; j < 8; j++) {
        if (offset == 8) {
          offset = 0;
          c_offset++;
        }
        size_t idx = i + c_offset;
        uint8_t *curr_char;
        uint8_t *next_char;
        if (idx >= text.count) {
          curr_char = (uint8_t *)font;
          next_char = curr_char;
        } else {
          curr_char = (uint8_t *)font[(size_t)text.data[idx]];
          if (idx < text.count - 1) {
            next_char = (uint8_t *)font[(size_t)text.data[idx + 1]];
          } else {
            next_char = (uint8_t *)font;
          }
        }
        screen[i * 8 + j] |= curr_char[j] >> (offset % 8);
        if (i <= (MODULE_COUNT - 1)) {
          screen[i * 8 + j] |= next_char[j] << (8 - (offset % 8));
        }
      }
    }
    draw_screen();
    usleep(20000);
    offset++;
  }
}

void screen_dispose() { close(fd); }

// Private API (impl)

#ifdef MAX7219_DUMMY
void send_message(uint8_t tx[MODULE_COUNT * 2]) {
  write(fd, tx, MODULE_COUNT * 2);
}
void broadcast_message(uint8_t addr, uint8_t data) {
  for (int i = 0; i < MODULE_COUNT; i++) {
    write(fd, &addr, 1);
    write(fd, &data, 1);
  }
}
#else
void send_message(uint8_t tx[MODULE_COUNT * 2]) {
  struct spi_ioc_transfer tr = {.tx_buf = (unsigned long)tx,
                                .rx_buf = 0,
                                .len = MODULE_COUNT * 2,
                                .delay_usecs = 0,
                                .speed_hz = 1000000,
                                .bits_per_word = 8};
  if (ioctl(fd, SPI_IOC_MESSAGE(1), &tr) < 1) {
    perror("SPI: ioctl failed");
    exit(1);
  }
}
void broadcast_message(uint8_t addr, uint8_t data) {
  uint8_t tx[MODULE_COUNT * 2];
  for (int i = 0; i < MODULE_COUNT; i++) {
    tx[i * 2] = addr;
    tx[i * 2 + 1] = data;
  }

  struct spi_ioc_transfer tr = {
      .tx_buf = (unsigned long)tx,
      .rx_buf = 0,
      .len = sizeof(tx),
      .delay_usecs = 0,
      .speed_hz = 10000000,
      .bits_per_word = 8,
  };

  if (ioctl(fd, SPI_IOC_MESSAGE(1), &tr) < 1) {
    perror("SPI: ioctl failed");
    exit(1);
  }
}

#endif
void max7219_init() {
  broadcast_message(0x0F, 0x00); // Disable display test
  broadcast_message(0x0C, 0x01); // Shutdown = normal operation
  broadcast_message(0x0B, 0x07); // Scan limit = all digits (0â€“7)
  broadcast_message(0x0A, 0x08); // Intensity: medium
  broadcast_message(0x09, 0x00); // Decode mode: none
  clear_screen();
  draw_screen();
}

void draw_screen_graph(uint8_t *graph, uint8_t width, uint8_t height) {
  int left_to_draw = width;
  int align = (8-height)/2;
  while (left_to_draw > 0) {
    uint8_t current_module = screen_row / 8;
    if (current_module > MODULE_COUNT-1) {
      // ignoring char, out of screen
      break;
    }
    uint8_t padding = screen_row % 8;
    uint8_t drawn = MIN(left_to_draw, 8-padding);
    // For each column we need to draw
    for (int i = 0; i < height; i++) {
      screen[current_module * 8 + i + align] |= (graph[i] >> (8-left_to_draw)) << (padding);
    }
    screen_row += drawn;
    left_to_draw -= drawn;
  }
}

void draw_screen() {
  // For each row
  for (int i = 0; i < 8; i++) {
    uint8_t tx[MODULE_COUNT * 2];
    // For each led display
    for (int j = 0; j < MODULE_COUNT; j++) {
      tx[j * 2] = i + 1;
      tx[j * 2 + 1] = screen[(MODULE_COUNT - 1 - j) * 8 + 7 -
                             i]; // Screen shall be send reversed
    }
    send_message(tx);
  }
}

void clear_screen() {
  screen_offset = 0;
  screen_row = 0;
  memset(screen, 0, MODULE_COUNT * 8);
}

uint8_t font[128][8] = {
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0000 (nul)
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0001
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0002
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0003
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0004
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0005
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0006
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0007
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0008
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0009
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+000A
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+000B
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+000C
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+000D
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+000E
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+000F
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0010
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0011
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0012
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0013
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0014
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0015
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0016
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0017
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0018
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0019
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+001A
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+001B
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+001C
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+001D
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+001E
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+001F
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0020 (space)
    {0x18, 0x3C, 0x3C, 0x18, 0x18, 0x00, 0x18, 0x00}, // U+0021 (!)
    {0x36, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0022 (")
    {0x36, 0x36, 0x7F, 0x36, 0x7F, 0x36, 0x36, 0x00}, // U+0023 (#)
    {0x0C, 0x3E, 0x03, 0x1E, 0x30, 0x1F, 0x0C, 0x00}, // U+0024 ($)
    {0x00, 0x63, 0x33, 0x18, 0x0C, 0x66, 0x63, 0x00}, // U+0025 (%)
    {0x1C, 0x36, 0x1C, 0x6E, 0x3B, 0x33, 0x6E, 0x00}, // U+0026 (&)
    {0x06, 0x06, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0027 (')
    {0x18, 0x0C, 0x06, 0x06, 0x06, 0x0C, 0x18, 0x00}, // U+0028 (()
    {0x06, 0x0C, 0x18, 0x18, 0x18, 0x0C, 0x06, 0x00}, // U+0029 ())
    {0x00, 0x66, 0x3C, 0xFF, 0x3C, 0x66, 0x00, 0x00}, // U+002A (*)
    {0x00, 0x0C, 0x0C, 0x3F, 0x0C, 0x0C, 0x00, 0x00}, // U+002B (+)
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x0C, 0x06}, // U+002C (,)
    {0x00, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x00}, // U+002D (-)
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x0C, 0x00}, // U+002E (.)
    {0x60, 0x30, 0x18, 0x0C, 0x06, 0x03, 0x01, 0x00}, // U+002F (/)
    {0x3E, 0x63, 0x73, 0x7B, 0x6F, 0x67, 0x3E, 0x00}, // U+0030 (0)
    {0x0C, 0x0E, 0x0C, 0x0C, 0x0C, 0x0C, 0x3F, 0x00}, // U+0031 (1)
    {0x1E, 0x33, 0x30, 0x1C, 0x06, 0x33, 0x3F, 0x00}, // U+0032 (2)
    {0x1E, 0x33, 0x30, 0x1C, 0x30, 0x33, 0x1E, 0x00}, // U+0033 (3)
    {0x38, 0x3C, 0x36, 0x33, 0x7F, 0x30, 0x78, 0x00}, // U+0034 (4)
    {0x3F, 0x03, 0x1F, 0x30, 0x30, 0x33, 0x1E, 0x00}, // U+0035 (5)
    {0x1C, 0x06, 0x03, 0x1F, 0x33, 0x33, 0x1E, 0x00}, // U+0036 (6)
    {0x3F, 0x33, 0x30, 0x18, 0x0C, 0x0C, 0x0C, 0x00}, // U+0037 (7)
    {0x1E, 0x33, 0x33, 0x1E, 0x33, 0x33, 0x1E, 0x00}, // U+0038 (8)
    {0x1E, 0x33, 0x33, 0x3E, 0x30, 0x18, 0x0E, 0x00}, // U+0039 (9)
    {0x00, 0x0C, 0x0C, 0x00, 0x00, 0x0C, 0x0C, 0x00}, // U+003A (:)
    {0x00, 0x0C, 0x0C, 0x00, 0x00, 0x0C, 0x0C, 0x06}, // U+003B (;)
    {0x18, 0x0C, 0x06, 0x03, 0x06, 0x0C, 0x18, 0x00}, // U+003C (<)
    {0x00, 0x00, 0x3F, 0x00, 0x00, 0x3F, 0x00, 0x00}, // U+003D (=)
    {0x06, 0x0C, 0x18, 0x30, 0x18, 0x0C, 0x06, 0x00}, // U+003E (>)
    {0x1E, 0x33, 0x30, 0x18, 0x0C, 0x00, 0x0C, 0x00}, // U+003F (?)
    {0x3E, 0x63, 0x7B, 0x7B, 0x7B, 0x03, 0x1E, 0x00}, // U+0040 (@)
    {0x0C, 0x1E, 0x33, 0x33, 0x3F, 0x33, 0x33, 0x00}, // U+0041 (A)
    {0x3F, 0x66, 0x66, 0x3E, 0x66, 0x66, 0x3F, 0x00}, // U+0042 (B)
    {0x3C, 0x66, 0x03, 0x03, 0x03, 0x66, 0x3C, 0x00}, // U+0043 (C)
    {0x1F, 0x36, 0x66, 0x66, 0x66, 0x36, 0x1F, 0x00}, // U+0044 (D)
    {0x7F, 0x46, 0x16, 0x1E, 0x16, 0x46, 0x7F, 0x00}, // U+0045 (E)
    {0x7F, 0x46, 0x16, 0x1E, 0x16, 0x06, 0x0F, 0x00}, // U+0046 (F)
    {0x3C, 0x66, 0x03, 0x03, 0x73, 0x66, 0x7C, 0x00}, // U+0047 (G)
    {0x33, 0x33, 0x33, 0x3F, 0x33, 0x33, 0x33, 0x00}, // U+0048 (H)
    {0x1E, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x1E, 0x00}, // U+0049 (I)
    {0x78, 0x30, 0x30, 0x30, 0x33, 0x33, 0x1E, 0x00}, // U+004A (J)
    {0x67, 0x66, 0x36, 0x1E, 0x36, 0x66, 0x67, 0x00}, // U+004B (K)
    {0x0F, 0x06, 0x06, 0x06, 0x46, 0x66, 0x7F, 0x00}, // U+004C (L)
    {0x63, 0x77, 0x7F, 0x7F, 0x6B, 0x63, 0x63, 0x00}, // U+004D (M)
    {0x63, 0x67, 0x6F, 0x7B, 0x73, 0x63, 0x63, 0x00}, // U+004E (N)
    {0x1C, 0x36, 0x63, 0x63, 0x63, 0x36, 0x1C, 0x00}, // U+004F (O)
    {0x3F, 0x66, 0x66, 0x3E, 0x06, 0x06, 0x0F, 0x00}, // U+0050 (P)
    {0x1E, 0x33, 0x33, 0x33, 0x3B, 0x1E, 0x38, 0x00}, // U+0051 (Q)
    {0x3F, 0x66, 0x66, 0x3E, 0x36, 0x66, 0x67, 0x00}, // U+0052 (R)
    {0x1E, 0x33, 0x07, 0x0E, 0x38, 0x33, 0x1E, 0x00}, // U+0053 (S)
    {0x3F, 0x2D, 0x0C, 0x0C, 0x0C, 0x0C, 0x1E, 0x00}, // U+0054 (T)
    {0x33, 0x33, 0x33, 0x33, 0x33, 0x33, 0x3F, 0x00}, // U+0055 (U)
    {0x33, 0x33, 0x33, 0x33, 0x33, 0x1E, 0x0C, 0x00}, // U+0056 (V)
    {0x63, 0x63, 0x63, 0x6B, 0x7F, 0x77, 0x63, 0x00}, // U+0057 (W)
    {0x63, 0x63, 0x36, 0x1C, 0x1C, 0x36, 0x63, 0x00}, // U+0058 (X)
    {0x33, 0x33, 0x33, 0x1E, 0x0C, 0x0C, 0x1E, 0x00}, // U+0059 (Y)
    {0x7F, 0x63, 0x31, 0x18, 0x4C, 0x66, 0x7F, 0x00}, // U+005A (Z)
    {0x1E, 0x06, 0x06, 0x06, 0x06, 0x06, 0x1E, 0x00}, // U+005B ([)
    {0x03, 0x06, 0x0C, 0x18, 0x30, 0x60, 0x40, 0x00}, // U+005C (\)
    {0x1E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x1E, 0x00}, // U+005D (])
    {0x08, 0x1C, 0x36, 0x63, 0x00, 0x00, 0x00, 0x00}, // U+005E (^)
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF}, // U+005F (_)
    {0x0C, 0x0C, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+0060 (`)
    {0x00, 0x00, 0x1E, 0x30, 0x3E, 0x33, 0x6E, 0x00}, // U+0061 (a)
    {0x07, 0x06, 0x06, 0x3E, 0x66, 0x66, 0x3B, 0x00}, // U+0062 (b)
    {0x00, 0x00, 0x1E, 0x33, 0x03, 0x33, 0x1E, 0x00}, // U+0063 (c)
    {0x38, 0x30, 0x30, 0x3e, 0x33, 0x33, 0x6E, 0x00}, // U+0064 (d)
    {0x00, 0x00, 0x1E, 0x33, 0x3f, 0x03, 0x1E, 0x00}, // U+0065 (e)
    {0x1C, 0x36, 0x06, 0x0f, 0x06, 0x06, 0x0F, 0x00}, // U+0066 (f)
    {0x00, 0x00, 0x6E, 0x33, 0x33, 0x3E, 0x30, 0x1F}, // U+0067 (g)
    {0x07, 0x06, 0x36, 0x6E, 0x66, 0x66, 0x67, 0x00}, // U+0068 (h)
    {0x0C, 0x00, 0x0E, 0x0C, 0x0C, 0x0C, 0x1E, 0x00}, // U+0069 (i)
    {0x30, 0x00, 0x30, 0x30, 0x30, 0x33, 0x33, 0x1E}, // U+006A (j)
    {0x07, 0x06, 0x66, 0x36, 0x1E, 0x36, 0x67, 0x00}, // U+006B (k)
    {0x0E, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x1E, 0x00}, // U+006C (l)
    {0x00, 0x00, 0x33, 0x7F, 0x7F, 0x6B, 0x63, 0x00}, // U+006D (m)
    {0x00, 0x00, 0x1F, 0x33, 0x33, 0x33, 0x33, 0x00}, // U+006E (n)
    {0x00, 0x00, 0x1E, 0x33, 0x33, 0x33, 0x1E, 0x00}, // U+006F (o)
    {0x00, 0x00, 0x3B, 0x66, 0x66, 0x3E, 0x06, 0x0F}, // U+0070 (p)
    {0x00, 0x00, 0x6E, 0x33, 0x33, 0x3E, 0x30, 0x78}, // U+0071 (q)
    {0x00, 0x00, 0x3B, 0x6E, 0x66, 0x06, 0x0F, 0x00}, // U+0072 (r)
    {0x00, 0x00, 0x3E, 0x03, 0x1E, 0x30, 0x1F, 0x00}, // U+0073 (s)
    {0x08, 0x0C, 0x3E, 0x0C, 0x0C, 0x2C, 0x18, 0x00}, // U+0074 (t)
    {0x00, 0x00, 0x33, 0x33, 0x33, 0x33, 0x6E, 0x00}, // U+0075 (u)
    {0x00, 0x00, 0x33, 0x33, 0x33, 0x1E, 0x0C, 0x00}, // U+0076 (v)
    {0x00, 0x00, 0x63, 0x6B, 0x7F, 0x7F, 0x36, 0x00}, // U+0077 (w)
    {0x00, 0x00, 0x63, 0x36, 0x1C, 0x36, 0x63, 0x00}, // U+0078 (x)
    {0x00, 0x00, 0x33, 0x33, 0x33, 0x3E, 0x30, 0x1F}, // U+0079 (y)
    {0x00, 0x00, 0x3F, 0x19, 0x0C, 0x26, 0x3F, 0x00}, // U+007A (z)
    {0x38, 0x0C, 0x0C, 0x07, 0x0C, 0x0C, 0x38, 0x00}, // U+007B ({)
    {0x18, 0x18, 0x18, 0x00, 0x18, 0x18, 0x18, 0x00}, // U+007C (|)
    {0x07, 0x0C, 0x0C, 0x38, 0x0C, 0x0C, 0x07, 0x00}, // U+007D (})
    {0x6E, 0x3B, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // U+007E (~)
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}  // U+007F
};

uint8_t small_font[256][6] = {
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // 0x00
    {0x40, 0xA0, 0xE0, 0xA0, 0x40, 0x00}, // 0x01
    {0x40, 0xE0, 0xA0, 0xE0, 0x40, 0x00}, // 0x02
    {0x00, 0xA0, 0xE0, 0xE0, 0x40, 0x00}, // 0x03
    {0x00, 0x40, 0xE0, 0xE0, 0x40, 0x00}, // 0x04
    {0x40, 0xE0, 0xE0, 0x40, 0xE0, 0x00}, // 0x05
    {0x40, 0x40, 0xE0, 0x40, 0xE0, 0x00}, // 0x06
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // 0x07
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // 0x08
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // 0x09
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // 0x0A
    {0x00, 0xC0, 0x80, 0x60, 0x60, 0x00}, // 0x0B
    {0x40, 0xA0, 0x40, 0xE0, 0x40, 0x00}, // 0x0C
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // 0x0D
    {0x40, 0xC0, 0xA0, 0x80, 0x40, 0x00}, // 0x0E
    {0x40, 0xE0, 0xA0, 0xE0, 0x40, 0x00}, // 0x0F
    {0x20, 0x60, 0xE0, 0x60, 0x20, 0x00}, // 0x10
    {0x80, 0xC0, 0xE0, 0xC0, 0x80, 0x00}, // 0x11
    {0x40, 0xE0, 0x40, 0xE0, 0x40, 0x00}, // 0x12
    {0xA0, 0xA0, 0xA0, 0x00, 0xA0, 0x00}, // 0x13
    {0x00, 0x80, 0x40, 0x40, 0x40, 0x40}, // 0x14
    {0x40, 0x40, 0x40, 0x40, 0x20, 0x00}, // 0x15
    {0x00, 0x00, 0x00, 0x00, 0xE0, 0x00}, // 0x16
    {0x40, 0xE0, 0x40, 0xE0, 0x40, 0xE0}, // 0x17
    {0x40, 0xE0, 0x40, 0x40, 0x40, 0x00}, // 0x18
    {0x40, 0x40, 0x40, 0xE0, 0x40, 0x00}, // 0x19
    {0x00, 0x40, 0xF0, 0x40, 0x00, 0x00}, // 0x1A
    {0x00, 0x20, 0xF0, 0x20, 0x00, 0x00}, // 0x1B
    {0x00, 0x00, 0x20, 0xE0, 0x00, 0x00}, // 0x1C
    {0x00, 0xA0, 0xE0, 0xA0, 0x00, 0x00}, // 0x1D
    {0x00, 0x40, 0xE0, 0xE0, 0x00, 0x00}, // 0x1E
    {0x00, 0xE0, 0xE0, 0x40, 0x00, 0x00}, // 0x1F
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // 0x20
    {0x40, 0x40, 0x40, 0x00, 0x40, 0x00}, // 0x21
    {0xA0, 0xA0, 0x00, 0x00, 0x00, 0x00}, // 0x22
    {0xA0, 0xE0, 0xA0, 0xE0, 0xA0, 0x00}, // 0x23
    {0x40, 0xC0, 0x60, 0xC0, 0x60, 0x40}, // 0x24
    {0x20, 0x80, 0x40, 0x20, 0x80, 0x00}, // 0x25
    {0x40, 0xA0, 0xC0, 0xA0, 0xE0, 0x00}, // 0x26
    {0x60, 0x20, 0x00, 0x00, 0x00, 0x00}, // 0x27
    {0x40, 0x20, 0x20, 0x20, 0x40, 0x00}, // 0x28
    {0x20, 0x40, 0x40, 0x40, 0x20, 0x00}, // 0x29
    {0xA0, 0x40, 0xE0, 0x40, 0xA0, 0x00}, // 0x2A
    {0x00, 0x40, 0xE0, 0x40, 0x00, 0x00}, // 0x2B
    {0x00, 0x00, 0x00, 0x00, 0x60, 0x20}, // 0x2C
    {0x00, 0x00, 0xE0, 0x00, 0x00, 0x00}, // 0x2D
    {0x00, 0x00, 0x00, 0x00, 0x40, 0x00}, // 0x2E
    {0x80, 0x80, 0x40, 0x20, 0x20, 0x00}, // 0x2F
    {0xC0, 0xA0, 0xA0, 0xA0, 0x60, 0x00}, // 0x30
    {0x40, 0x60, 0x40, 0x40, 0xE0, 0x00}, // 0x31
    {0x60, 0x80, 0x40, 0x20, 0xE0, 0x00}, // 0x32
    {0x60, 0x80, 0x40, 0x80, 0x60, 0x00}, // 0x33
    {0x80, 0xA0, 0xE0, 0x80, 0x80, 0x00}, // 0x34
    {0xE0, 0x20, 0x60, 0x80, 0x60, 0x00}, // 0x35
    {0x40, 0x20, 0x60, 0xA0, 0x40, 0x00}, // 0x36
    {0xE0, 0x80, 0xC0, 0x40, 0x40, 0x00}, // 0x37
    {0x40, 0xA0, 0x40, 0xA0, 0x40, 0x00}, // 0x38
    {0x40, 0xA0, 0xC0, 0x80, 0x40, 0x00}, // 0x39
    {0x00, 0x00, 0x40, 0x00, 0x40, 0x00}, // 0x3A
    {0x00, 0x00, 0x40, 0x00, 0x60, 0x20}, // 0x3B
    {0x80, 0x40, 0x20, 0x40, 0x80, 0x00}, // 0x3C
    {0x00, 0x00, 0xE0, 0x00, 0xE0, 0x00}, // 0x3D
    {0x20, 0x40, 0x80, 0x40, 0x20, 0x00}, // 0x3E
    {0x60, 0x80, 0x40, 0x00, 0x40, 0x00}, // 0x3F
    {0xE0, 0xA0, 0xA0, 0x20, 0xE0, 0x00}, // 0x40
    {0x40, 0xA0, 0xE0, 0xA0, 0xA0, 0x00}, // 0x41
    {0x60, 0xA0, 0x60, 0xA0, 0x60, 0x00}, // 0x42
    {0xC0, 0x20, 0x20, 0x20, 0xC0, 0x00}, // 0x43
    {0x60, 0xA0, 0xA0, 0xA0, 0x60, 0x00}, // 0x44
    {0xE0, 0x20, 0x60, 0x20, 0xE0, 0x00}, // 0x45
    {0xE0, 0x20, 0x60, 0x20, 0x20, 0x00}, // 0x46
    {0xC0, 0x20, 0xA0, 0xA0, 0xC0, 0x00}, // 0x47
    {0xA0, 0xA0, 0xE0, 0xA0, 0xA0, 0x00}, // 0x48
    {0xE0, 0x40, 0x40, 0x40, 0xE0, 0x00}, // 0x49
    {0x80, 0x80, 0x80, 0xA0, 0x40, 0x00}, // 0x4A
    {0xA0, 0xA0, 0x60, 0xA0, 0xA0, 0x00}, // 0x4B
    {0x20, 0x20, 0x20, 0x20, 0xE0, 0x00}, // 0x4C
    {0xA0, 0xE0, 0xE0, 0xA0, 0xA0, 0x00}, // 0x4D
    {0xA0, 0xE0, 0xA0, 0xA0, 0xA0, 0x00}, // 0x4E
    {0x40, 0xA0, 0xA0, 0xA0, 0x40, 0x00}, // 0x4F
    {0x60, 0xA0, 0x60, 0x20, 0x20, 0x00}, // 0x50
    {0x40, 0xA0, 0xA0, 0xE0, 0xC0, 0x00}, // 0x51
    {0x60, 0xA0, 0x60, 0xA0, 0xA0, 0x00}, // 0x52
    {0xC0, 0x20, 0xE0, 0x80, 0x60, 0x00}, // 0x53
    {0xE0, 0x40, 0x40, 0x40, 0x40, 0x00}, // 0x54
    {0xA0, 0xA0, 0xA0, 0xA0, 0xE0, 0x00}, // 0x55
    {0xA0, 0xA0, 0xA0, 0xA0, 0x40, 0x00}, // 0x56
    {0xA0, 0xA0, 0xE0, 0xE0, 0xA0, 0x00}, // 0x57
    {0xA0, 0xA0, 0x40, 0xA0, 0xA0, 0x00}, // 0x58
    {0xA0, 0xA0, 0x40, 0x40, 0x40, 0x00}, // 0x59
    {0xE0, 0x80, 0x40, 0x20, 0xE0, 0x00}, // 0x5A
    {0x60, 0x20, 0x20, 0x20, 0x60, 0x00}, // 0x5B
    {0x20, 0x20, 0x40, 0x80, 0x80, 0x00}, // 0x5C
    {0x60, 0x40, 0x40, 0x40, 0x60, 0x00}, // 0x5D
    {0x40, 0xA0, 0x00, 0x00, 0x00, 0x00}, // 0x5E
    {0x00, 0x00, 0x00, 0x00, 0x00, 0xF0}, // 0x5F
    {0x60, 0x40, 0x00, 0x00, 0x00, 0x00}, // 0x60
    {0x00, 0x00, 0xC0, 0xA0, 0xE0, 0x00}, // 0x61
    {0x20, 0x20, 0x60, 0xA0, 0x60, 0x00}, // 0x62
    {0x00, 0x00, 0xC0, 0x20, 0xC0, 0x00}, // 0x63
    {0x80, 0x80, 0xC0, 0xA0, 0xC0, 0x00}, // 0x64
    {0x00, 0x00, 0xE0, 0x60, 0xC0, 0x00}, // 0x65
    {0x80, 0x40, 0xE0, 0x40, 0x40, 0x00}, // 0x66
    {0x00, 0x00, 0xE0, 0xA0, 0x80, 0xE0}, // 0x67
    {0x20, 0x20, 0x60, 0xA0, 0xA0, 0x00}, // 0x68
    {0x40, 0x00, 0x40, 0x40, 0x40, 0x00}, // 0x69
    {0x40, 0x00, 0x40, 0x40, 0x40, 0x60}, // 0x6A
    {0x20, 0x20, 0xA0, 0x60, 0xA0, 0x00}, // 0x6B
    {0x40, 0x40, 0x40, 0x40, 0x40, 0x00}, // 0x6C
    {0x00, 0x00, 0xE0, 0xE0, 0xA0, 0x00}, // 0x6D
    {0x00, 0x00, 0x60, 0xA0, 0xA0, 0x00}, // 0x6E
    {0x00, 0x00, 0x40, 0xA0, 0x40, 0x00}, // 0x6F
    {0x00, 0x00, 0x60, 0xA0, 0x60, 0x20}, // 0x70
    {0x00, 0x00, 0xC0, 0xA0, 0xC0, 0x80}, // 0x71
    {0x00, 0x00, 0x60, 0x20, 0x20, 0x00}, // 0x72
    {0x00, 0x00, 0xC0, 0x40, 0x60, 0x00}, // 0x73
    {0x00, 0x40, 0xE0, 0x40, 0xC0, 0x00}, // 0x74
    {0x00, 0x00, 0xA0, 0xA0, 0xE0, 0x00}, // 0x75
    {0x00, 0x00, 0xA0, 0xA0, 0x40, 0x00}, // 0x76
    {0x00, 0x00, 0xA0, 0xE0, 0xE0, 0x00}, // 0x77
    {0x00, 0x00, 0xA0, 0x40, 0xA0, 0x00}, // 0x78
    {0x00, 0x00, 0xA0, 0xA0, 0x40, 0x20}, // 0x79
    {0x00, 0x00, 0x60, 0x40, 0xC0, 0x00}, // 0x7A
    {0xC0, 0x40, 0x60, 0x40, 0xC0, 0x00}, // 0x7B
    {0x40, 0x40, 0x40, 0x40, 0x40, 0x00}, // 0x7C
    {0x60, 0x40, 0xC0, 0x40, 0x60, 0x00}, // 0x7D
    {0xA0, 0x50, 0x00, 0x00, 0x00, 0x00}, // 0x7E
    {0x00, 0x40, 0xA0, 0xE0, 0x00, 0x00}, // 0x7F
    {0xC0, 0x20, 0x20, 0xE0, 0x40, 0x20}, // 0x80
    {0xA0, 0x00, 0xA0, 0xA0, 0xC0, 0x00}, // 0x81
    {0x80, 0x40, 0xE0, 0x60, 0xC0, 0x00}, // 0x82
    {0x40, 0xA0, 0xC0, 0xA0, 0xE0, 0x00}, // 0x83
    {0xA0, 0x00, 0xC0, 0xA0, 0xE0, 0x00}, // 0x84
    {0x20, 0x40, 0xC0, 0xA0, 0xE0, 0x00}, // 0x85
    {0x40, 0x00, 0xC0, 0xA0, 0xE0, 0x00}, // 0x86
    {0x00, 0xE0, 0x20, 0xE0, 0x40, 0x60}, // 0x87
    {0x40, 0xA0, 0xE0, 0x60, 0xC0, 0x00}, // 0x88
    {0xA0, 0x00, 0xE0, 0x60, 0xC0, 0x00}, // 0x89
    {0x20, 0x40, 0xE0, 0x60, 0xC0, 0x00}, // 0x8A
    {0xA0, 0x00, 0x40, 0x40, 0x40, 0x00}, // 0x8B
    {0x40, 0xA0, 0x00, 0x40, 0x40, 0x00}, // 0x8C
    {0x20, 0x40, 0x00, 0x40, 0x40, 0x00}, // 0x8D
    {0xA0, 0x40, 0xA0, 0xE0, 0xA0, 0x00}, // 0x8E
    {0x40, 0x40, 0xA0, 0xE0, 0xA0, 0x00}, // 0x8F
    {0x80, 0x40, 0xE0, 0x60, 0xE0, 0x00}, // 0x90
    {0x00, 0x00, 0xC0, 0xE0, 0x60, 0x00}, // 0x91
    {0xC0, 0x60, 0xE0, 0x60, 0xE0, 0x00}, // 0x92
    {0x40, 0xA0, 0x40, 0xA0, 0x40, 0x00}, // 0x93
    {0xA0, 0x00, 0x40, 0xA0, 0x40, 0x00}, // 0x94
    {0x20, 0x40, 0x40, 0xA0, 0x40, 0x00}, // 0x95
    {0x40, 0xA0, 0x00, 0xA0, 0xE0, 0x00}, // 0x96
    {0x20, 0x40, 0xA0, 0xA0, 0xE0, 0x00}, // 0x97
    {0xA0, 0x00, 0xA0, 0xA0, 0x40, 0x20}, // 0x98
    {0xA0, 0x40, 0xA0, 0xA0, 0x40, 0x00}, // 0x99
    {0xA0, 0x00, 0xA0, 0xA0, 0xE0, 0x00}, // 0x9A
    {0x40, 0xE0, 0x20, 0xE0, 0x40, 0x00}, // 0x9B
    {0x80, 0x40, 0xE0, 0x40, 0xE0, 0x00}, // 0x9C
    {0xA0, 0xE0, 0x40, 0xE0, 0x40, 0x00}, // 0x9D
    {0x00, 0x60, 0x60, 0xA0, 0xA0, 0x00}, // 0x9E
    {0xC0, 0x40, 0xC0, 0x40, 0x60, 0x00}, // 0x9F
    {0x80, 0x40, 0xC0, 0xA0, 0xE0, 0x00}, // 0xA0
    {0x80, 0x40, 0x00, 0x40, 0x40, 0x00}, // 0xA1
    {0x80, 0x40, 0xE0, 0xA0, 0xE0, 0x00}, // 0xA2
    {0x80, 0x40, 0x00, 0xA0, 0xE0, 0x00}, // 0xA3
    {0xE0, 0x00, 0xE0, 0xA0, 0xA0, 0x00}, // 0xA4
    {0xE0, 0x00, 0xA0, 0xE0, 0xA0, 0x00}, // 0xA5
    {0xC0, 0xA0, 0xE0, 0x00, 0xE0, 0x00}, // 0xA6
    {0x40, 0xA0, 0x40, 0x00, 0xE0, 0x00}, // 0xA7
    {0x40, 0x00, 0x40, 0x20, 0xC0, 0x00}, // 0xA8
    {0x00, 0xE0, 0x20, 0x20, 0x00, 0x00}, // 0xA9
    {0x00, 0x70, 0x40, 0x40, 0x00, 0x00}, // 0xAA
    {0x20, 0xA0, 0x40, 0xA0, 0xC0, 0x00}, // 0xAB
    {0x20, 0xA0, 0x40, 0xE0, 0x80, 0x00}, // 0xAC
    {0x40, 0x00, 0x40, 0x40, 0x40, 0x00}, // 0xAD
    {0x00, 0xA0, 0x50, 0xA0, 0x00, 0x00}, // 0xAE
    {0x00, 0x50, 0xA0, 0x50, 0x00, 0x00}, // 0xAF
    {0x20, 0x80, 0x20, 0x80, 0x20, 0x80}, // 0xB0
    {0xA0, 0x50, 0xA0, 0x50, 0xA0, 0x50}, // 0xB1
    {0xD0, 0x70, 0xD0, 0x70, 0xD0, 0x70}, // 0xB2
    {0x40, 0x40, 0x40, 0x40, 0x40, 0x40}, // 0xB3
    {0x40, 0x40, 0x70, 0x40, 0x40, 0x40}, // 0xB4
    {0x40, 0x70, 0x40, 0x70, 0x40, 0x40}, // 0xB5
    {0xA0, 0xA0, 0xB0, 0xA0, 0xA0, 0xA0}, // 0xB6
    {0x00, 0x00, 0xF0, 0xA0, 0xA0, 0xA0}, // 0xB7
    {0x00, 0x70, 0x40, 0x70, 0x40, 0x40}, // 0xB8
    {0xA0, 0xB0, 0x80, 0xB0, 0xA0, 0xA0}, // 0xB9
    {0xA0, 0xA0, 0xA0, 0xA0, 0xA0, 0xA0}, // 0xBA
    {0x00, 0xF0, 0x80, 0xB0, 0xA0, 0xA0}, // 0xBB
    {0xA0, 0xB0, 0x80, 0xF0, 0x00, 0x00}, // 0xBC
    {0xA0, 0xA0, 0xF0, 0x00, 0x00, 0x00}, // 0xBD
    {0x40, 0x70, 0x40, 0x70, 0x00, 0x00}, // 0xBE
    {0x00, 0x00, 0x70, 0x40, 0x40, 0x40}, // 0xBF
    {0x40, 0x40, 0xC0, 0x00, 0x00, 0x00}, // 0xC0
    {0x40, 0x40, 0xF0, 0x00, 0x00, 0x00}, // 0xC1
    {0x00, 0x00, 0xF0, 0x40, 0x40, 0x40}, // 0xC2
    {0x40, 0x40, 0xC0, 0x40, 0x40, 0x40}, // 0xC3
    {0x00, 0x00, 0xF0, 0x00, 0x00, 0x00}, // 0xC4
    {0x40, 0x40, 0xF0, 0x40, 0x40, 0x40}, // 0xC5
    {0x40, 0xC0, 0x40, 0xC0, 0x40, 0x40}, // 0xC6
    {0xA0, 0xA0, 0xA0, 0xA0, 0xA0, 0xA0}, // 0xC7
    {0xA0, 0xA0, 0x20, 0xE0, 0x00, 0x00}, // 0xC8
    {0x00, 0xE0, 0x20, 0xA0, 0xA0, 0xA0}, // 0xC9
    {0xA0, 0xB0, 0x00, 0xF0, 0x00, 0x00}, // 0xCA
    {0x00, 0xF0, 0x00, 0xB0, 0xA0, 0xA0}, // 0xCB
    {0xA0, 0xA0, 0x20, 0xA0, 0xA0, 0xA0}, // 0xCC
    {0x00, 0xF0, 0x00, 0xF0, 0x00, 0x00}, // 0xCD
    {0xA0, 0xB0, 0x00, 0xB0, 0xA0, 0xA0}, // 0xCE
    {0x40, 0xF0, 0x00, 0xF0, 0x00, 0x00}, // 0xCF
    {0xA0, 0xA0, 0xF0, 0x00, 0x00, 0x00}, // 0xD0
    {0x00, 0xF0, 0x00, 0xF0, 0x40, 0x40}, // 0xD1
    {0x00, 0x00, 0xF0, 0xA0, 0xA0, 0xA0}, // 0xD2
    {0xA0, 0xA0, 0xE0, 0x00, 0x00, 0x00}, // 0xD3
    {0x40, 0xC0, 0x40, 0xC0, 0x00, 0x00}, // 0xD4
    {0x00, 0xC0, 0x40, 0xC0, 0x40, 0x40}, // 0xD5
    {0x00, 0x00, 0xE0, 0xA0, 0xA0, 0xA0}, // 0xD6
    {0xA0, 0xA0, 0xB0, 0xA0, 0xA0, 0xA0}, // 0xD7
    {0x40, 0xF0, 0x00, 0xF0, 0x40, 0x40}, // 0xD8
    {0x40, 0x40, 0x70, 0x00, 0x00, 0x00}, // 0xD9
    {0x00, 0x00, 0xC0, 0x40, 0x40, 0x40}, // 0xDA
    {0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0}, // 0xDB
    {0x00, 0x00, 0x00, 0xF0, 0xF0, 0xF0}, // 0xDC
    {0x30, 0x30, 0x30, 0x30, 0x30, 0x30}, // 0xDD
    {0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0}, // 0xDE
    {0xF0, 0xF0, 0xF0, 0x00, 0x00, 0x00}, // 0xDF
    {0x00, 0x00, 0xE0, 0x60, 0xE0, 0x00}, // 0xE0
    {0x40, 0xA0, 0x60, 0xA0, 0x60, 0x20}, // 0xE1
    {0xE0, 0xA0, 0x20, 0x20, 0x20, 0x00}, // 0xE2
    {0xE0, 0xA0, 0xA0, 0xA0, 0xA0, 0x00}, // 0xE3
    {0xE0, 0x20, 0x40, 0x20, 0xE0, 0x00}, // 0xE4
    {0x00, 0x00, 0xC0, 0xA0, 0x40, 0x00}, // 0xE5
    {0x00, 0x00, 0xA0, 0xA0, 0xE0, 0x20}, // 0xE6
    {0x00, 0x80, 0x60, 0x40, 0x40, 0x00}, // 0xE7
    {0xE0, 0x40, 0xA0, 0x40, 0xE0, 0x00}, // 0xE8
    {0x40, 0xA0, 0xE0, 0xA0, 0x40, 0x00}, // 0xE9
    {0x00, 0x40, 0xA0, 0xA0, 0xA0, 0x00}, // 0xEA
    {0xC0, 0x20, 0x40, 0xA0, 0x40, 0x00}, // 0xEB
    {0x00, 0x00, 0xE0, 0xA0, 0xE0, 0x00}, // 0xEC
    {0x40, 0xE0, 0xA0, 0xE0, 0x40, 0x00}, // 0xED
    {0xC0, 0x20, 0xE0, 0x20, 0xC0, 0x00}, // 0xEE
    {0x40, 0xA0, 0xA0, 0xA0, 0xA0, 0x00}, // 0xEF
    {0xE0, 0x00, 0xE0, 0x00, 0xE0, 0x00}, // 0xF0
    {0x40, 0xE0, 0x40, 0x00, 0xE0, 0x00}, // 0xF1
    {0x60, 0x80, 0x60, 0x00, 0xE0, 0x00}, // 0xF2
    {0xC0, 0x20, 0xC0, 0x00, 0xE0, 0x00}, // 0xF3
    {0x00, 0x80, 0x40, 0x40, 0x40, 0x40}, // 0xF4
    {0x40, 0x40, 0x40, 0x40, 0x20, 0x00}, // 0xF5
    {0x40, 0x00, 0xE0, 0x00, 0x40, 0x00}, // 0xF6
    {0x00, 0xA0, 0x50, 0xA0, 0x50, 0x00}, // 0xF7
    {0x40, 0xA0, 0x40, 0x00, 0x00, 0x00}, // 0xF8
    {0x00, 0x40, 0xE0, 0x40, 0x00, 0x00}, // 0xF9
    {0x00, 0x00, 0x40, 0x00, 0x00, 0x00}, // 0xFA
    {0xC0, 0x40, 0x40, 0x60, 0x40, 0x00}, // 0xFB
    {0xE0, 0xA0, 0xA0, 0x00, 0x00, 0x00}, // 0xFC
    {0x60, 0x40, 0x20, 0x60, 0x00, 0x00}, // 0xFD
    {0x00, 0x00, 0x60, 0x60, 0x00, 0x00}, // 0xFE
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00}  // 0xFF
};

#endif
